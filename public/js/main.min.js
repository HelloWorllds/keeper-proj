function validateEmail(a){var e=/^(\w+\.?\+?)*@([a-z0-9]{2,})\.(\w{2,4})$/;return e.test(a)}function validatePass(a){var e=/(\w([#?!@$%^&*-])?){6,40}/;return e.test(a)}function checkInput(a,e){a?$("#"+e).css("border","2px solid #339933"):$("#"+e).css("border","2px solid #c70000")}var config={apiKey:"AIzaSyBaK3yPJP9p3F3tVC5TRVZntd08DDpiPhQ",authDomain:"keeper-4e597.firebaseapp.com",databaseURL:"https://keeper-4e597.firebaseio.com",storageBucket:"keeper-4e597.appspot.com",messagingSenderId:"874065713541"};firebase.initializeApp(config),$(document).ready(function(){function a(a){t>i.length-1?($(".main").animate({opacity:"0.8"},a,function(){t=1,$(".main").css({background:"url('images/"+i[t]+"') no-repeat"})}),$(".main").animate({opacity:"1"},a)):($(".main").animate({opacity:"0.8"},a,function(){$(".main").css({background:"url('images/"+i[t]+"') no-repeat"}),t++}),$(".main").animate({opacity:"1"},a))}var e=$(window).height();$("body").css("height",e).css("width",$(window).width());var i=["main_bg1.jpg","main_bg2.jpg","main_bg3.jpg","main_bg4.jpg","main_bg5.jpg","main_bg6.jpg","main_bg7.jpg"],t=0;setInterval(a,8e3),$(".main .btn-carousel--left").click(function(){var a=$(".main").css("background"),e=parseInt(a.replace(/[^1-7]/gi,""))-1;8==e?e=1:0==e&&(e=7),$(".main").css("background","url('images/main_bg"+e+".jpg') no-repeat")}),$(".main .btn-carousel--right").click(function(){var a=$(".main").css("background"),e=parseInt(a.replace(/[^1-7]/gi,""))+1;8==e?e=1:0==e&&(e=7),$(".main").css("background","url('images/main_bg"+e+".jpg') no-repeat")}),$(".authorization .authorization-tabs .authorization-tab").click(function(){$(".authorization .authorization-tabs .authorization-tab").removeClass("active").eq($(this).index()).addClass("active"),$(".authorization .authorization-tab__item").hide().eq($(this).index()).fadeIn()}),$(".album__header").click(function(){"none"==$(".btn-download").css("display")?$(".btn-download").slideToggle("slow"):$(".btn-download").slideToggle("slow")});for(var s=$(".album__img-wrapper span").length,o=1;o<=s;++o)o!=s&&(1==o||o%6==0?($(".album__img-wrapper span:nth-child("+o+")").css("height","412px"),$(".album__img-wrapper span:nth-child("+o+")").css("width","66.666%"),$(".album__img-wrapper span:nth-child("+o+")").css("float","left")):o%3!=0&&o%9!=0||($(".album__img-wrapper span:nth-child("+o+")").css("height","412px"),$(".album__img-wrapper span:nth-child("+o+")").css("width","66.666%"),$(".album__img-wrapper span:nth-child("+o+")").css("float","right")));"block"==$(".slider").css("display")?$(".main").css("display","none"):$(".main").css("display","block");var n=parseInt($(".slider__carousel__img-wrapper img").length),l=1;$(".slider__carousel__info__img-counter span").text(l+" of "+n),$(".slider__carousel__info__image-name").text($(".visible-img").attr("alt"));var r=0,c=!0;$(".like-counter").text(r),$(".btn-img--like").click(function(){c?(++r,$(".like-counter").text(r),$(".btn-img--like").css("background-position","-403px -114px")):$(".btn-img--like").prop("disabled",!0),c=!1}),$("#lNameReg").focusout(function(){checkInput(validateEmail($("#lNameReg").val()),"lNameReg")}),$("#passwReg").focusout(function(){checkInput(validatePass($("#passwReg").val()),"passwReg")}),$("#rePasswReg").focusout(function(){$("#passwReg").val()!=$("#rePasswReg").val()?$("#rePasswReg").css("border","2px solid #c70000"):$("#rePasswReg").css("border","2px solid #339933")})}),$("#btnReg").click(function(a){var e=$("#lNameReg").val(),i=$("#passwReg").val(),t=firebase.auth(),s=t.createUserWithEmailAndPassword(e,i);s.catch(function(a){console.log(a.message)}),$("#lNameReg").val("").css("border",0),$("#passwReg").val("").css("border",0),$("#rePasswReg").val("").css("border",0)});var txtEmailLogin;$("#btnLogin").click(function(a){txtEmailLogin=$("#lNameLogin").val();var e=$("#passwLogin").val(),i=firebase.auth(),t=i.signInWithEmailAndPassword(txtEmailLogin,e);t.catch(function(a){console.log(a.message)}),$("#lNameLogin").val("").css("border",0),$("#passwLogin").val("").css("border",0)}),firebase.auth().onAuthStateChanged(function(a){if(a){var e="block",i="none";$(".main-page").css("display",i),$(".authorization").css("display",i),$(".album").css("display",e),$(".slider").css("display",i),localStorage.setItem("main-page",i),localStorage.setItem("authorization",i),localStorage.setItem("album",e),localStorage.setItem("slider",i);var t="inline-block";$(".menu__auth").css("display",i),$(".menu__logout").css("display",t),$(".menu__logout p").text(txtEmailLogin),localStorage.setItem("menu__auth",i),localStorage.setItem("menu__logout",t),console.log(a)}else console.log("not work")}),$(".menu__auth__logout").click(function(a){firebase.auth().signOut();var e="inline-block",i="none";$(".menu__logout").css("display",i),$(".menu__logout p").text(""),$(".menu__auth").css("display",e),localStorage.setItem("menu__auth",e),localStorage.setItem("menu__logout",i),$(".menu__logo").click()}),$(".btn-download").click(function(){$(".album__form-wrapper").css("display","block")}),$(".album__download-form__close").click(function(){$(".album__form-wrapper").css("display","none")}),$("#dwnlInput").change(function(a){var e=a.target.files[0],i=$(".menu__logout p").text(),t=firebase.storage().ref(i+"/"+e.name),s=t.put(e);s.on("state_changed",function(){$(".album__form-wrapper").css("display","none"),$(".album__priview-img").css("display","block"),t.getDownloadURL().then(function(a){$(".album__priview-img__img-wrapper").append("<img src='"+a+"'>")})})}),$(".album__priview-img__close").click(function(){$(".album__priview-img").css("display","none")}),$(".btn-cancel").click(function(){$(".album__priview-img__input-wrapper input").val("")}),$(".btn-ok").click(function(){$(".album__priview-img").css("display","none");var a=$(".album__priview-img__input-wrapper input").val();$(".album__priview-img__img-wrapper > img").attr("alt",a),$(".album__img-wrapper").append("<span class='new'></span>"),$(".album__priview-img__img-wrapper > img").detach().prependTo(".album__img-wrapper span.new"),$(".album__img-wrapper span").removeAttr("class"),$(".album__priview-img__input-wrapper input").val("")}),$(document).ready(function(){$(".btn-white").click(function(){var a="block",e="none";$(".main-page").css("display",e),$(".authorization").css("display",a),$(".album").css("display",e),$(".slider").css("display",e),$(".authorization .authorization-tabs .authorization-tab:eq(1)").removeClass("active"),$(".authorization .authorization-tabs .authorization-tab:eq(0)").addClass("active"),$(".authorization .authorization-tab__item").hide().eq(0).fadeIn(),localStorage.setItem("main-page",e),localStorage.setItem("authorization",a),localStorage.setItem("album",e),localStorage.setItem("slider",e)}),$(".menu__auth__reg").click(function(){var a="block",e="none";$(".main-page").css("display",e),$(".authorization").css("display",a),$(".album").css("display",e),$(".slider").css("display",e),$(".authorization .authorization-tabs .authorization-tab:eq(1)").removeClass("active"),$(".authorization .authorization-tabs .authorization-tab:eq(0)").addClass("active"),$(".authorization .authorization-tab__item").hide().eq(0).fadeIn(),localStorage.setItem("main-page",e),localStorage.setItem("authorization",a),localStorage.setItem("album",e),localStorage.setItem("slider",e)}),$(".menu__auth__auth").click(function(){var a="block",e="none";$(".main-page").css("display",e),$(".authorization").css("display",a),$(".album").css("display",e),$(".slider").css("display",e),$(".authorization .authorization-tabs .authorization-tab:eq(0)").removeClass("active"),$(".authorization .authorization-tabs .authorization-tab:eq(1)").addClass("active"),$(".authorization .authorization-tab__item").hide().eq(1).fadeIn(),localStorage.setItem("main-page",e),localStorage.setItem("authorization",a),localStorage.setItem("album",e),localStorage.setItem("slider",e)}),$(".menu__logo").click(function(){var a="block",e="none";$(".main-page").css("display",a),$(".authorization").css("display",e),$(".album").css("display",e),$(".slider").css("display",e),localStorage.setItem("main-page",a),localStorage.setItem("authorization",e),localStorage.setItem("album",e),localStorage.setItem("slider",e)}),$(".album__img-wrapper").on("click","span",function(){var a="block",e="none";$(".main").css("display",e),$(".slider").css("display",a),localStorage.setItem("main",e),localStorage.setItem("slider",a);var i=$(this).children().attr("src"),t=$(this).children().attr("alt");$(".slider__carousel__img-wrapper").append("<img class='visible-img' src='"+i+"'>"),$(".slider__carousel__info__image-name").text(t)}),$(".btn-img--exit").click(function(){var a="block",e="none";$(".main").css("display",a),$(".slider").css("display",e),localStorage.setItem("main",a),localStorage.setItem("slider",e),$(".slider__carousel__img-wrapper img").removeAttr("class"),$(".slider__carousel__info__image-name").text("")});var a=localStorage.getItem("main-page"),e=localStorage.getItem("authorization"),i=localStorage.getItem("album"),t=localStorage.getItem("slider"),s=localStorage.getItem("main"),o=localStorage.getItem("menu__auth"),n=localStorage.getItem("menu__logout");$(".main-page").css("display",a),$(".authorization").css("display",e),$(".album").css("display",i),$(".slider").css("display",t),$(".main").css("display",s),$(".menu__logout").css("display",n),$(".menu__auth").css("display",o)});